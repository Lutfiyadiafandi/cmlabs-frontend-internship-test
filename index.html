<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>mealapp</title>
  </head>
  <body class="font-sans">
    <!-- HEADER -->
    <header class="relative px-4 py-6 shadow-sm">
      <div
        class="max-w-screen-xl mx-auto text-slate-800 flex flex-col justify-center gap-4 md:items-center md:flex-row md:justify-between"
      >
        <div class="text-2xl font-semibold">
          <a href="#">mealapp</a>
        </div>

        <div class="md:hidden absolute top-7 right-4">
          <button id="menuToggle" class="focus:outline-none">
            <svg
              class="h-6 w-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16m-7 6h7"
              ></path>
            </svg>
          </button>
        </div>

        <nav
          class="hidden flex items-center flex-col md:flex md:flex-row gap-5 text-slate-800 font-medium"
          id="navMenu"
        >
          <a href="#" class="hover:text-slate-400 hover:font-semibold">Home</a>
          <a href="#" class="hover:text-slate-400 hover:font-semibold">Foods</a>
          <a href="#" class="hover:text-slate-400 hover:font-semibold"
            >Ingredients</a
          >
          <a href="#" class="hover:text-slate-400 hover:font-semibold"
            >Local Culinary</a
          >
        </nav>
      </div>
    </header>

    <main class="w-full">
      <!-- Category Page -->
      <div id="categoryPage">
        <div
          class="bg-gray-100 px-4 py-10 md:py-20 text-center mx-auto flex items-center flex-col gap-2"
        >
          <div class="flex gap-3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-red-500"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"
              />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-red-500"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"
              />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-red-500"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"
              />
            </svg>
          </div>
          <p class="text-lg font-medium text-slate-700">mealapp API website</p>
          <h1 class="text-3xl lg:text-5xl font-bold text-slate-800">
            See All The Delicious Foods
          </h1>
        </div>

        <div
          class="max-w-screen-xl mx-auto px-4 py-10 grid grid-cols-2 md:grid-cols-4 gap-4"
          id="categoryList"
        ></div>
      </div>

      <!-- Category Detail Page -->
      <div id="categoryDetailPage" style="display: none">
        <div
          class="max-w-screen-xl mx-auto px-4 py-10 grid grid-cols-2 md:grid-cols-4 gap-4"
          id="mealList"
        ></div>
      </div>

      <!-- Meal Detail Page -->
      <div id="mealDetailPage" style="display: none">
        <div class="max-w-screen-xl mx-auto px-4 py-10" id="mealDetail"></div>
      </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      function toggleMenu() {
        document.getElementById("navMenu").classList.toggle("hidden");
      }
      document
        .getElementById("menuToggle")
        .addEventListener("click", toggleMenu);

      const API_BASE_URL = "https://www.themealdb.com/api/json/v1/1/";

      async function fetchData(endpoint, params = {}) {
        try {
          const response = await axios.get(API_BASE_URL + endpoint, { params });
          return response.data;
        } catch (error) {
          console.error("Error fetching data:", error);
        }
      }

      function showCategoryPage() {
        $("#categoryPage").show();
        $("#categoryDetailPage").hide();
        $("#mealDetailPage").hide();
      }
      function showCategoryDetailPage() {
        $("#categoryPage").hide();
        $("#categoryDetailPage").show();
        $("#mealDetailPage").hide();
      }

      async function renderCategoryList() {
        const categories = await fetchData("categories.php");
        const categoryListContainer = $("#categoryList");

        categories.categories.forEach((category) => {
          const categoryItem = $(`
            <div class="relative w-full h-[100px] md:h-[150px] overflow-hidden rounded-3xl group cursor-pointer">
              <img
                src=${category.strCategoryThumb}
                alt=${category.strCategory}
                class="object-cover object-center w-full h-full transition-transform transform-gpu duration-500 group-hover:scale-110"
              />
              <div class="absolute inset-0 bg-black opacity-50"></div>
              <div class="absolute inset-0 flex items-center justify-center">
                <p class="text-lg font-medium text-white text-center z-10">
                  ${category.strCategory}
                </p>
              </div>
            </div>`).on("click", () => CategoryDetail(category.strCategory));
          categoryListContainer.append(categoryItem);
        });
      }

      async function CategoryDetail(categoryName) {
        $("#categoryPage").hide();
        $("#categoryDetailPage").show();

        const meals = await fetchData("filter.php", { c: categoryName });
        const mealListContainer = $("#mealList");
        mealListContainer.empty().append(`
        <div class="col-span-2 md:col-span-4">
            <div class="flex gap-1 items-center">
            <span class="flex gap-1 text-sm font-semibold text-black cursor-pointer"
            onclick="showCategoryPage()"
          >Home
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
            </span>
            <span class="flex gap-1 text-sm font-semibold text-black cursor-pointer"
            onclick="showCategoryPage()"
            >Foods
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
            </span>
            <span class="flex gap-1 text-sm font-semibold text-gray-300"
          >${categoryName}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
            </span>
          </div>
            <h3 class="mb-5 text-3xl md:text-5xl font-medium text-slate-800 py-10 border-gray-100 border-b-2">${categoryName}</h3>
        </div>
       `);
        meals.meals.forEach((meal) => {
          const mealItem = $(`
              <div class="relative w-full h-[200px] lg:h-[300px] overflow-hidden rounded-3xl group cursor-pointer">
              <img
                src=${meal.strMealThumb}
                alt=${meal.strMeal}
                class="object-cover object-center w-full h-full transition-transform transform-gpu duration-500 group-hover:scale-110"
              />
              <div class="absolute inset-0 bg-black opacity-50"></div>
              <div class="absolute inset-0 flex items-center justify-center">
                <p class="text-lg font-medium text-white text-center z-10">
                    ${meal.strMeal}
                </p>
              </div>
            </div>
            `).on("click", () => MealDetail(meal.idMeal));
          mealListContainer.append(mealItem);
        });
      }

      async function MealDetail(mealId) {
        $("#categoryDetailPage").hide();
        $("#mealDetailPage").show();

        const mealDetailContainer = $("#mealDetail");
        const mealDetail = await fetchData("lookup.php", { i: mealId });

        const meal = mealDetail.meals[0];
        const ingredientsList = Array.from({ length: 20 })
          .map((_, i) => {
            const measure = meal[`strMeasure${i + 1}`];
            const ingredient = meal[`strIngredient${i + 1}`];
            return measure && ingredient
              ? `<li class="text-md font-medium text-slate-600">${measure} ${ingredient}</li>`
              : null;
          })
          .filter(Boolean);
        const ingredientsHTML = ingredientsList.join("");
        const breadcrumbsmeal = `<div class="flex gap-1 items-center">
            <span class="flex gap-1 text-sm font-semibold text-black cursor-pointer"
            onclick="showCategoryPage()"
          >Home
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
            </span>
            <span class="flex gap-1 text-sm font-semibold text-black cursor-pointer"
            onclick="showCategoryPage()"
            >Foods
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
            </span>
            <span class="flex gap-1 text-sm font-semibold text-black cursor-pointer"
            onclick="showCategoryDetailPage()"
          >${meal.strCategory}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
            </span>
            <span class="flex gap-1 text-sm font-semibold text-gray-300"
          >${meal.strMeal}
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
          </span>
          </div>`;
        const mealDetailItem = $(
          `<div>
                 ${breadcrumbsmeal}
                <h3 class="mb-5 text-3xl md:text-5xl font-medium text-slate-800 py-10 border-gray-100 border-b-2">${meal.strMeal}</h3>
                <span class="text-md font-semibold text-red-500">${meal.strArea} Culinary</span>
            </div>`
        )
          .append(`<div class="mt-2 w-full grid grid-cols-1 lg:grid-cols-2 gap-5">
            <img
                src=${meal.strMealThumb}
                alt=${meal.strMeal}
                class="col-span-1 h-[450px] lg:h-[600px] object-cover object-center rounded-3xl"
              />
            <div class="col-span-1 flex flex-col gap-5">
                <div>
                    <h3 class="text-3xl font-medium text-slate-800">Instructions</h3>
                    <p class="mt-2 text-md font-medium text-slate-600 whitespace-pre-line">${meal.strInstructions}</p>
                    </div>
                <div>
                    <h3 class="text-3xl font-medium text-slate-800">Recipes</h3>
                    <ul class="mt-2 list-disc list-inside">${ingredientsHTML}</ul>
                </div>
            </div>
            </div>`);

        if (meal.strYoutube) {
          mealDetailItem.append(
            `<div class="mt-5 col-span-1 lg:col-span-2">
                <h3 class="text-3xl font-medium text-slate-800 text-center">Tutorials</h3>
                <iframe class="mt-2 w-full h-[350px] md:h-[500px]" src="https://www.youtube.com/embed/${meal.strYoutube.slice(
                  -11
                )}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>`
          );
        }

        mealDetailContainer.html(mealDetailItem);
      }
      $(document).ready(() => {
        renderCategoryList();
      });
    </script>
  </body>
</html>
